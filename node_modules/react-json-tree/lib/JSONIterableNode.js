"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _react = _interopRequireDefault(require("react"));

var _JSONNestedNode = _interopRequireDefault(require("./JSONNestedNode"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

// Returns the "n Items" string for this node,
// generating and caching it if it hasn't been created yet.
function createItemString(data, limit) {
  var count = 0;
  var hasMore = false;

  if (Number.isSafeInteger(data.size)) {
    count = data.size;
  } else {
    // eslint-disable-next-line no-unused-vars
    var _iterator = _createForOfIteratorHelper(data),
        _step;

    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var entry = _step.value;

        if (limit && count + 1 > limit) {
          hasMore = true;
          break;
        }

        count += 1;
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
  }

  return "".concat(hasMore ? '>' : '').concat(count, " ").concat(count !== 1 ? 'entries' : 'entry');
}

// Configures <JSONNestedNode> to render an iterable
var JSONIterableNode = function JSONIterableNode(_ref) {
  var props = _extends({}, _ref);

  return /*#__PURE__*/_react["default"].createElement(_JSONNestedNode["default"], _extends({}, props, {
    nodeType: "Iterable",
    nodeTypeIndicator: "()",
    createItemString: createItemString
  }));
};

var _default = JSONIterableNode;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9KU09OSXRlcmFibGVOb2RlLnRzeCJdLCJuYW1lcyI6WyJjcmVhdGVJdGVtU3RyaW5nIiwiZGF0YSIsImxpbWl0IiwiY291bnQiLCJoYXNNb3JlIiwiTnVtYmVyIiwiaXNTYWZlSW50ZWdlciIsInNpemUiLCJlbnRyeSIsIkpTT05JdGVyYWJsZU5vZGUiLCJwcm9wcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7Ozs7Ozs7Ozs7QUFHQTtBQUNBO0FBQ0EsU0FBU0EsZ0JBQVQsQ0FBMEJDLElBQTFCLEVBQXFDQyxLQUFyQyxFQUFvRDtBQUNsRCxNQUFJQyxLQUFLLEdBQUcsQ0FBWjtBQUNBLE1BQUlDLE9BQU8sR0FBRyxLQUFkOztBQUNBLE1BQUlDLE1BQU0sQ0FBQ0MsYUFBUCxDQUFxQkwsSUFBSSxDQUFDTSxJQUExQixDQUFKLEVBQXFDO0FBQ25DSixJQUFBQSxLQUFLLEdBQUdGLElBQUksQ0FBQ00sSUFBYjtBQUNELEdBRkQsTUFFTztBQUNMO0FBREssK0NBRWVOLElBRmY7QUFBQTs7QUFBQTtBQUVMLDBEQUEwQjtBQUFBLFlBQWZPLEtBQWU7O0FBQ3hCLFlBQUlOLEtBQUssSUFBSUMsS0FBSyxHQUFHLENBQVIsR0FBWUQsS0FBekIsRUFBZ0M7QUFDOUJFLFVBQUFBLE9BQU8sR0FBRyxJQUFWO0FBQ0E7QUFDRDs7QUFDREQsUUFBQUEsS0FBSyxJQUFJLENBQVQ7QUFDRDtBQVJJO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFTTjs7QUFDRCxtQkFBVUMsT0FBTyxHQUFHLEdBQUgsR0FBUyxFQUExQixTQUErQkQsS0FBL0IsY0FBd0NBLEtBQUssS0FBSyxDQUFWLEdBQWMsU0FBZCxHQUEwQixPQUFsRTtBQUNEOztBQU9EO0FBQ0EsSUFBTU0sZ0JBQWdELEdBQUcsU0FBbkRBLGdCQUFtRCxPQUFrQjtBQUFBLE1BQVpDLEtBQVk7O0FBQ3pFLHNCQUNFLGdDQUFDLDBCQUFELGVBQ01BLEtBRE47QUFFRSxJQUFBLFFBQVEsRUFBQyxVQUZYO0FBR0UsSUFBQSxpQkFBaUIsRUFBQyxJQUhwQjtBQUlFLElBQUEsZ0JBQWdCLEVBQUVWO0FBSnBCLEtBREY7QUFRRCxDQVREOztlQVdlUyxnQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgSlNPTk5lc3RlZE5vZGUgZnJvbSAnLi9KU09OTmVzdGVkTm9kZSc7XG5pbXBvcnQgeyBDaXJjdWxhclByb3BzUGFzc2VkVGhyb3VnaEpTT05Ob2RlIH0gZnJvbSAnLi90eXBlcyc7XG5cbi8vIFJldHVybnMgdGhlIFwibiBJdGVtc1wiIHN0cmluZyBmb3IgdGhpcyBub2RlLFxuLy8gZ2VuZXJhdGluZyBhbmQgY2FjaGluZyBpdCBpZiBpdCBoYXNuJ3QgYmVlbiBjcmVhdGVkIHlldC5cbmZ1bmN0aW9uIGNyZWF0ZUl0ZW1TdHJpbmcoZGF0YTogYW55LCBsaW1pdDogbnVtYmVyKSB7XG4gIGxldCBjb3VudCA9IDA7XG4gIGxldCBoYXNNb3JlID0gZmFsc2U7XG4gIGlmIChOdW1iZXIuaXNTYWZlSW50ZWdlcihkYXRhLnNpemUpKSB7XG4gICAgY291bnQgPSBkYXRhLnNpemU7XG4gIH0gZWxzZSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBkYXRhKSB7XG4gICAgICBpZiAobGltaXQgJiYgY291bnQgKyAxID4gbGltaXQpIHtcbiAgICAgICAgaGFzTW9yZSA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY291bnQgKz0gMTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGAke2hhc01vcmUgPyAnPicgOiAnJ30ke2NvdW50fSAke2NvdW50ICE9PSAxID8gJ2VudHJpZXMnIDogJ2VudHJ5J31gO1xufVxuXG5pbnRlcmZhY2UgUHJvcHMgZXh0ZW5kcyBDaXJjdWxhclByb3BzUGFzc2VkVGhyb3VnaEpTT05Ob2RlIHtcbiAgZGF0YTogYW55O1xuICBub2RlVHlwZTogc3RyaW5nO1xufVxuXG4vLyBDb25maWd1cmVzIDxKU09OTmVzdGVkTm9kZT4gdG8gcmVuZGVyIGFuIGl0ZXJhYmxlXG5jb25zdCBKU09OSXRlcmFibGVOb2RlOiBSZWFjdC5GdW5jdGlvbkNvbXBvbmVudDxQcm9wcz4gPSAoeyAuLi5wcm9wcyB9KSA9PiB7XG4gIHJldHVybiAoXG4gICAgPEpTT05OZXN0ZWROb2RlXG4gICAgICB7Li4ucHJvcHN9XG4gICAgICBub2RlVHlwZT1cIkl0ZXJhYmxlXCJcbiAgICAgIG5vZGVUeXBlSW5kaWNhdG9yPVwiKClcIlxuICAgICAgY3JlYXRlSXRlbVN0cmluZz17Y3JlYXRlSXRlbVN0cmluZ31cbiAgICAvPlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgSlNPTkl0ZXJhYmxlTm9kZTtcbiJdfQ==